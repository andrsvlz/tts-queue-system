[globals]
; Variables globales para sistema de colas TTS

[general]
static=yes
writeprotect=no
clearglobalvars=no

; Contexto para llamadas TTS desde cola
[internal]
; Extensión para reproducir audio TTS desde workers
exten => tts_playback,1,NoOp(=== LLAMADA TTS DESDE COLA ===)
exten => tts_playback,n,NoOp(Audio: ${AUDIO_FILE})
exten => tts_playback,n,NoOp(Job ID: ${JOB_ID})
exten => tts_playback,n,NoOp(Phone: ${PHONE_NUMBER})
exten => tts_playback,n,Answer()
exten => tts_playback,n,Wait(1)
exten => tts_playback,n,NoOp(Reproduciendo audio TTS desde cola...)
exten => tts_playback,n,Playback(en_US_f_Allison/${AUDIO_FILE})
exten => tts_playback,n,Wait(2)
exten => tts_playback,n,NoOp(Audio TTS completado - Job: ${JOB_ID})
exten => tts_playback,n,Hangup()

; Extensión para TTS con repetición
exten => tts_playback_repeat,1,NoOp(=== LLAMADA TTS CON REPETICIÓN ===)
exten => tts_playback_repeat,n,Answer()
exten => tts_playback_repeat,n,Wait(1)
exten => tts_playback_repeat,n,Playback(en_US_f_Allison/${AUDIO_FILE})
exten => tts_playback_repeat,n,Wait(1)
exten => tts_playback_repeat,n,Playback(en_US_f_Allison/${AUDIO_FILE})
exten => tts_playback_repeat,n,Wait(2)
exten => tts_playback_repeat,n,Hangup()

; Extensión para TTS interactivo
exten => tts_playback_interactive,1,NoOp(=== LLAMADA TTS INTERACTIVA ===)
exten => tts_playback_interactive,n,Answer()
exten => tts_playback_interactive,n,Wait(1)
exten => tts_playback_interactive,n,Playback(en_US_f_Allison/${AUDIO_FILE})
exten => tts_playback_interactive,n,Wait(1)
exten => tts_playback_interactive,n,Playback(beep)
exten => tts_playback_interactive,n,WaitExten(10)
exten => tts_playback_interactive,n,Playback(goodbye)
exten => tts_playback_interactive,n,Hangup()

; Respuestas para TTS interactivo
exten => 1,1,Playback(thank-you-for-calling)
exten => 1,n,Hangup()

exten => 2,1,Playback(goodbye)
exten => 2,n,Hangup()

; Extensiones de prueba manuales
exten => 200,1,Answer()
exten => 200,n,Wait(1)
exten => 200,n,Playback(en_US_f_Allison/tts_message)
exten => 200,n,Wait(2)
exten => 200,n,Hangup()

exten => 201,1,Answer()
exten => 201,n,Wait(1)
exten => 201,n,Playback(en_US_f_Allison/tts_message2)
exten => 201,n,Wait(2)
exten => 201,n,Hangup()

exten => 100,1,Answer()
exten => 100,n,Playback(en_US_f_Allison/hello-world)
exten => 100,n,Hangup()

; Llamada directa al número específico 3005050149
exten => 3005050149,1,NoOp(Llamando a 3005050149 via trunk mysipbk)
exten => 3005050149,n,Dial(SIP/mysipbk/3005050149,60)
exten => 3005050149,n,Hangup()

; Llamadas a números celulares (10 dígitos que empiecen con 3)
exten => _3XXXXXXXXX,1,NoOp(Llamando a celular ${EXTEN})
exten => _3XXXXXXXXX,n,Dial(SIP/mysipbk/${EXTEN},60)
exten => _3XXXXXXXXX,n,Hangup()

; Llamadas a números fijos (7 dígitos)
exten => _XXXXXXX,1,NoOp(Llamando a número fijo ${EXTEN})
exten => _XXXXXXX,n,Dial(SIP/mysipbk/${EXTEN},60)
exten => _XXXXXXX,n,Hangup()

; Contexto para llamadas desde el trunk celular
[celular]
; Recibir llamadas del trunk
exten => _X.,1,NoOp(Llamada entrante desde trunk: ${CALLERID(num)})
exten => _X.,n,Answer()
exten => _X.,n,Playback(en_US_f_Allison/hello-world)
exten => _X.,n,Hangup()

; Contexto por defecto
[default]
include => internal
